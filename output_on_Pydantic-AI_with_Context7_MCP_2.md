Based on the documentation search, here's a comprehensive overview of Pydantic AI agent examples with OpenAI integration:                                                                                                                │
                                                                                                                                                                                                                                         │
## Getting Started with Pydantic AI and OpenAI                                                                                                                                                                                           │
                                                                                                                                                                                                                                         │
### Installation                                                                                                                                                                                                                         │
```bash                                                                                                                                                                                                                                  │
pip install "pydantic-ai-slim"                                                                                                                                                                                                           │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Basic Setup                                                                                                                                                                                                                          │
Set your OpenAI API key:                                                                                                                                                                                                                 │
```bash                                                                                                                                                                                                                                  │
export OPENAI_API_KEY='your-api-key'                                                                                                                                                                                                     │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Simple Agent Example                                                                                                                                                                                                                 │
```python                                                                                                                                                                                                                                │
from pydantic_ai import Agent                                                                                                                                                                                                            │
                                                                                                                                                                                                                                         │
# Initialize agent with OpenAI model                                                                                                                                                                                                     │
agent = Agent('openai:gpt-4o')                                                                                                                                                                                                           │
                                                                                                                                                                                                                                         │
# Run synchronously                                                                                                                                                                                                                      │
result = agent.run_sync('What is the capital of France?')                                                                                                                                                                                │
print(result.output)  # Paris                                                                                                                                                                                                            │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Advanced Agent Configuration                                                                                                                                                                                                         │
```python                                                                                                                                                                                                                                │
from pydantic_ai import Agent                                                                                                                                                                                                            │
from pydantic_ai.models.openai import OpenAIModel                                                                                                                                                                                        │
from pydantic_ai.providers.openai import OpenAIProvider                                                                                                                                                                                  │
                                                                                                                                                                                                                                         │
# Explicit model configuration                                                                                                                                                                                                           │
model = OpenAIModel(                                                                                                                                                                                                                     │
    'gpt-4o',                                                                                                                                                                                                                            │
    provider=OpenAIProvider(api_key='your-api-key')                                                                                                                                                                                      │
)                                                                                                                                                                                                                                        │
agent = Agent(                                                                                                                                                                                                                           │
    model,                                                                                                                                                                                                                               │
    system_prompt='Be concise and helpful.'                                                                                                                                                                                              │
)                                                                                                                                                                                                                                        │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Structured Output with Pydantic Models                                                                                                                                                                                               │
```python                                                                                                                                                                                                                                │
from pydantic import BaseModel                                                                                                                                                                                                           │
from pydantic_ai import Agent                                                                                                                                                                                                            │
                                                                                                                                                                                                                                         │
class CityLocation(BaseModel):                                                                                                                                                                                                           │
    city: str                                                                                                                                                                                                                            │
    country: str                                                                                                                                                                                                                         │
                                                                                                                                                                                                                                         │
agent = Agent('openai:gpt-4o', output_type=CityLocation)                                                                                                                                                                                 │
result = agent.run_sync('Where were the olympics held in 2012?')                                                                                                                                                                         │
print(result.output)  # city='London' country='United Kingdom'                                                                                                                                                                           │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Agent with Tools and Dependencies                                                                                                                                                                                                    │
```python                                                                                                                                                                                                                                │
from dataclasses import dataclass                                                                                                                                                                                                        │
import httpx                                                                                                                                                                                                                             │
from pydantic_ai import Agent, RunContext                                                                                                                                                                                                │
                                                                                                                                                                                                                                         │
@dataclass                                                                                                                                                                                                                               │
class MyDeps:                                                                                                                                                                                                                            │
    api_key: str                                                                                                                                                                                                                         │
    http_client: httpx.AsyncClient                                                                                                                                                                                                       │
                                                                                                                                                                                                                                         │
agent = Agent(                                                                                                                                                                                                                           │
    'openai:gpt-4o',                                                                                                                                                                                                                     │
    deps_type=MyDeps,                                                                                                                                                                                                                    │
    system_prompt='Use the provided tools to help users.'                                                                                                                                                                                │
)                                                                                                                                                                                                                                        │
                                                                                                                                                                                                                                         │
@agent.tool                                                                                                                                                                                                                              │
async def get_weather(ctx: RunContext[MyDeps], city: str) -> str:                                                                                                                                                                        │
    """Get weather for a city"""                                                                                                                                                                                                         │
    response = await ctx.deps.http_client.get(                                                                                                                                                                                           │
        f'https://api.weather.com/{city}',                                                                                                                                                                                               │
        headers={'Authorization': f'Bearer {ctx.deps.api_key}'}                                                                                                                                                                          │
    )                                                                                                                                                                                                                                    │
    return response.text                                                                                                                                                                                                                 │
                                                                                                                                                                                                                                         │
# Usage                                                                                                                                                                                                                                  │
async with httpx.AsyncClient() as client:                                                                                                                                                                                                │
    deps = MyDeps('your-key', client)                                                                                                                                                                                                    │
    result = await agent.run('What is the weather in Tokyo?', deps=deps)                                                                                                                                                                 │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Multi-Agent Applications                                                                                                                                                                                                             │
```python                                                                                                                                                                                                                                │
from pydantic_ai import Agent                                                                                                                                                                                                            │
                                                                                                                                                                                                                                         │
# Create specialized agents                                                                                                                                                                                                              │
joke_agent = Agent(                                                                                                                                                                                                                      │
    'openai:gpt-4o',                                                                                                                                                                                                                     │
    output_type=list,                                                                                                                                                                                                                    │
    system_prompt='Generate jokes on the given topic.'                                                                                                                                                                                   │
)                                                                                                                                                                                                                                        │
                                                                                                                                                                                                                                         │
main_agent = Agent(                                                                                                                                                                                                                      │
    'openai:gpt-4o',                                                                                                                                                                                                                     │
    system_prompt='Use the joke agent to get jokes, then select the best one.'                                                                                                                                                           │
)                                                                                                                                                                                                                                        │
                                                                                                                                                                                                                                         │
@main_agent.tool                                                                                                                                                                                                                         │
async def get_jokes(topic: str) -> list:                                                                                                                                                                                                 │
    result = await joke_agent.run(f'Generate 3 jokes about {topic}')                                                                                                                                                                     │
    return result.output                                                                                                                                                                                                                 │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### MCP Integration (Model Context Protocol)                                                                                                                                                                                             │
```python                                                                                                                                                                                                                                │
from pydantic_ai import Agent                                                                                                                                                                                                            │
from pydantic_ai.mcp import MCPServerStdio, MCPServerStreamableHTTP                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
# Connect to MCP server via stdio                                                                                                                                                                                                        │
server = MCPServerStdio('python', args=['-m', 'mcp_server'])                                                                                                                                                                             │
agent = Agent('openai:gpt-4o', toolsets=)                                                                                                                                                                                                │
                                                                                                                                                                                                                                         │
# Or via HTTP                                                                                                                                                                                                                            │
server = MCPServerStreamableHTTP('http://localhost:8000/mcp')                                                                                                                                                                            │
agent = Agent('openai:gpt-4o', toolsets=)                                                                                                                                                                                                │
                                                                                                                                                                                                                                         │
async def main():                                                                                                                                                                                                                        │
    async with agent:                                                                                                                                                                                                                    │
        result = await agent.run('Calculate 15 * 23 using the calculator tool')                                                                                                                                                          │
        print(result.output)                                                                                                                                                                                                             │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Streaming and Advanced Features                                                                                                                                                                                                      │
```python                                                                                                                                                                                                                                │
from pydantic_ai import Agent                                                                                                                                                                                                            │
from openai.types.responses import WebSearchToolParam                                                                                                                                                                                    │
from pydantic_ai.models.openai import OpenAIResponsesModel, OpenAIResponsesModelSettings                                                                                                                                                 │
                                                                                                                                                                                                                                         │
# Web search enabled agent                                                                                                                                                                                                               │
model_settings = OpenAIResponsesModelSettings(                                                                                                                                                                                           │
    openai_builtin_tools=[WebSearchToolParam(type='web_search_preview')],                                                                                                                                                                │
)                                                                                                                                                                                                                                        │
model = OpenAIResponsesModel('gpt-4o')                                                                                                                                                                                                   │
agent = Agent(model=model, model_settings=model_settings)                                                                                                                                                                                │
                                                                                                                                                                                                                                         │
result = agent.run_sync('What is the latest news about AI?')                                                                                                                                                                             │
print(result.output)                                                                                                                                                                                                                     │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
### Azure OpenAI Integration                                                                                                                                                                                                             │
```python                                                                                                                                                                                                                                │
from openai import AsyncAzureOpenAI                                                                                                                                                                                                      │
from pydantic_ai import Agent                                                                                                                                                                                                            │
from pydantic_ai.models.openai import OpenAIModel                                                                                                                                                                                        │
from pydantic_ai.providers.openai import OpenAIProvider                                                                                                                                                                                  │
                                                                                                                                                                                                                                         │
client = AsyncAzureOpenAI(                                                                                                                                                                                                               │
    azure_endpoint='https://your-resource.openai.azure.com',                                                                                                                                                                             │
    api_version='2024-07-01-preview',                                                                                                                                                                                                    │
    api_key='your-azure-key',                                                                                                                                                                                                            │
)                                                                                                                                                                                                                                        │
                                                                                                                                                                                                                                         │
model = OpenAIModel('gpt-4o', provider=OpenAIProvider(openai_client=client))                                                                                                                                                             │
agent = Agent(model)                                                                                                                                                                                                                     │
```                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                         │
These examples cover the essential patterns for building Pydantic AI agents with OpenAI integration, from basic usage to advanced features like structured outputs, tool usage, multi-agent systems, and MCP integration.  
